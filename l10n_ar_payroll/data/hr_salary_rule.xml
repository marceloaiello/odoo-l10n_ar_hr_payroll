<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Haberes y Descuentos: 10.000 - 10.999 -->
        <record id="rules_BASIC_HOURS" model="hr.salary.rule">
            <field name="name">HORAS NORMALES</field>
            <field name="code">10100</field>
            <field name="sequence">10100</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_BASIC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
if worked_days.WORK100:
    result_qty = worked_days.WORK100.number_of_hours
    result = contract.amount
else:
    result = 0.00
            </field>
        </record>

        <record id="rules_BASIC" model="hr.salary.rule">
            <field name="name">SUELDO BASICO</field>
            <field name="code">10100</field>
            <field name="sequence">10100</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_BASIC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
if worked_days.WORK100:
    result_qty = worked_days.WORK100.number_of_days
    result = contract.amount / worked_days.WORK100.number_of_days
else:
    result = 0.00
            </field>
        </record>

        <record id="rules_SAC" model="hr.salary.rule">
            <field name="name">S.A.C</field>
            <field name="code">10105</field>
            <field name="sequence">10105</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_SAC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = ((inputs.SACBASE / 2) / 180) * inputs.SACDAYS
            </field>
        </record>
        <record id="payslip_inputs_SACBASE" model="hr.rule.input">
            <field name="name">Mejor Sueldo Semestral - S.A.C</field>
            <field name="code">SACBASE</field>
            <field name="input_id" ref="l10n_ar_payroll.rules_SAC" /> <!-- TODO: Calcular mejor sueldo -->
        </record>
        <record id="payslip_inputs_SACWORKDAYS" model="hr.rule.input">
            <field name="name">Dias Trabajados - S.A.C</field>
            <field name="code">SACDAYS</field>
            <field name="input_id" ref="l10n_ar_payroll.rules_SAC" /> <!-- TODO: Calcular Dias -->
        </record>

        <record id="rules_AUS" model="hr.salary.rule">
            <field name="name">AUSENTISMO</field>
            <field name="code">AUS</field>
            <field name="sequence">10110</field>
            <field name="quantity">field_value</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_DESC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <field name="parent_rule_id"></field>
            <!-- Condition Select -->
            <field name="condition_select">range</field>
            <field name="condition_range">worked_days.WORK0.number_of_days</field>
            <field name="condition_range_min">1</field>
            <field name="condition_range_max">999</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
if not contract.is_wage_accurate:
    result_qty = -(worked_days.WORK0.number_of_hours)
    result = contract.amount
else:
    result_qty = -(worked_days.WORK0.number_of_days)
    result = contract.wage / worked_days.WORK100.number_of_days
            </field>
        </record>

        <record id="rules_ANTG" model="hr.salary.rule">
            <field name="name">ANTIGUEDAD</field>
            <field name="code">10120</field>
            <field name="sequence">10120</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_ADIC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">range</field>
            <field name="condition_range">employee.service_duration_years</field>
            <field name="condition_range_min">1</field>
            <field name="condition_range_max">999</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = 1.00
result_qty = employee.service_duration_years
result = categories.BASIC
            </field>
        </record>

        <record id="rules_HFRD" model="hr.salary.rule">
            <field name="name">FERIADOS</field>
            <field name="code">10125</field>
            <field name="sequence">10125</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_BASIC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">range</field>
            <field name="condition_range">worked_days.HFRD.number_of_days</field>
            <field name="condition_range_min">1</field>
            <field name="condition_range_max">999</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
if contract.is_wage_accurate:
    result_qty = worked_days.HFRD.number_of_days
    result = contract.wage / worked_days.WORK100.number_of_days
else:
    result_qty = worked_days.HFRD.number_of_hours
    result = contract.amount
            </field>
        </record>

        <record id="rules_OVT50" model="hr.salary.rule">
            <field name="name">HORAS EXTRA AL 50%</field>
            <field name="code">10130</field>
            <field name="sequence">10130</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_EXT" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">range</field>
            <field name="condition_range">worked_days.OVT50.number_of_hours</field>
            <field name="condition_range_min">1</field>
            <field name="condition_range_max">999</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = 150.00
if not contract.is_wage_accurate:
    result_qty = worked_days.OVT50.number_of_hours
    result = contract.amount
else:
    result_qty = worked_days.OVT50.number_of_days
    result = contract.wage / contract.work_days_per_month
<!-- TODO: Ver como se calcula en mensuales -->
            </field>
        </record>

        <record id="rules_OVT100" model="hr.salary.rule">
            <field name="name">HORAS EXTRA AL 100%</field>
            <field name="code">10131</field>
            <field name="sequence">10131</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_EXT" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <field name="note">Horas extra devengadas en el periodo pagadas al 100% (200%).</field>
            <!-- Condition Select -->
            <field name="condition_select">range</field>
            <field name="condition_range">worked_days.OVT50.number_of_hours</field>
            <field name="condition_range_min">1</field>
            <field name="condition_range_max">999</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = 200.00
if not contract.is_wage_accurate:
    result_qty = worked_days.OVT100.number_of_hours
    result = contract.amount
else:
    result_qty = worked_days.OVT100.number_of_days
    result = contract.wage / contract.work_days_per_month
<!-- TODO: Ver como se calcula en mensuales -->
            </field>
        </record>

        <record id="rules_PRES" model="hr.salary.rule">
            <field name="name">PREMIO PRESENTISMO</field>
            <field name="code">PRES</field>
            <field name="sequence">10150</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_PREM" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Parametrizacion de Logica -->
            <field name="condition_select">range</field>
            <field name="condition_range">worked_days.NOWORK100.number_of_days</field>
            <field name="condition_range_min">0</field>
            <field name="condition_range_max">0</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
if inputs.PRES-OVR is 0:
    if contract.schedule_pay == 'bi-weekly':
        result = 2000.0
        <!-- TODO: Ver si es posible parametrizar esto en algun lado, ya que el presentismo es comun -->
    else:
        result = 4000.0
else:
    result = 0.00
            </field>
        </record>
        <record id="payslip_inputs_PRES-OVR" model="hr.rule.input">
            <field name="name">Presentismo (Override)</field>
            <field name="code">PRES-OVR</field>
            <field name="input_id" ref="l10n_ar_payroll.rules_PRES" />
        </record>

        <!-- Retenciones: 20.000 - 20.999 -->
        <record id="rules_AFIP-JUB11" model="hr.salary.rule">
            <field name="name">APORTES JUBILATORIOS</field>
            <field name="code">20100</field>
            <field name="sequence">20100</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_RET" />
            <field name="register_id" ref="l10n_ar_payroll.contribution_register_AFIP-JUB" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = -11.00
result = categories.GROSS
            </field>
        </record>

        <record id="rules_AFIP-INSSJP3" model="hr.salary.rule">
            <field name="name">LEY 19.032 - INSSJP</field>
            <field name="code">20101</field>
            <field name="sequence">20101</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_RET" />
            <field name="register_id" ref="l10n_ar_payroll.contribution_register_AFIP-INSSJP" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = -3.00
result = categories.GROSS
            </field>
        </record>

        <record id="rules_AFIP-OS3" model="hr.salary.rule">
            <field name="name">APORTES OBRA SOCIAL</field>
            <field name="code">20102</field>
            <field name="sequence">20102</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_RET" />
            <field name="register_id" ref="l10n_ar_payroll.contribution_register_AFIP-OS" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = -3.00
result = categories.GROSS
            </field>
        </record>

        <!-- Deducciones: 30.000 - 30.999 -->
        <record id="rules_ADV" model="hr.salary.rule">
            <field name="name">ADELANTOS OTORGADOS</field>
            <field name="code">30110</field>
            <field name="sequence">30110</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_DED" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = -(inputs.ADV)
            </field>
        </record>
        <record id="payslip_inputs_ADV-AMOUNT" model="hr.rule.input">
            <field name="name">Importe Adelantos (a descontar)</field>
            <field name="code">ADV-AMOUNT</field>
            <field name="input_id" ref="l10n_ar_payroll.rules_ADV" />
        </record>

        <record id="rules_LOAN" model="hr.salary.rule">
            <field name="name">PLANES PRESTAMOS OTORGADOS</field>
            <field name="code">30115</field>
            <field name="sequence">30115</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_DED" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = -(inputs.LOAN)
            </field>
        </record>
        <record id="payslip_inputs_LOAN-AMOUNT" model="hr.rule.input">
            <field name="name">Importe Prestamos (a descontar)</field>
            <field name="code">LOAN-AMOUNT</field>
            <field name="input_id" ref="l10n_ar_payroll.rules_LOAN" />
        </record>

        <record id="rules_EMBG-JUD" model="hr.salary.rule">
            <field name="name">EMBARGOS JUDICIALES</field>
            <field name="code">30900</field>
            <field name="sequence">30900</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_DED" />
            <field name="register_id" ref="l10n_ar_payroll.contribution_register_JUD-EMBG" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result_rate = -(inputs.EMBG-RATE)
result = categories.NET
            </field> <!-- TODO: Ver como poner los embargos -->
        </record>
        <record id="payslip_inputs_EMBG-RATE" model="hr.rule.input">
            <field name="name">Porcentual de Embargos</field>
            <field name="code">EMBG-RATE</field>
            <field name="input_id" ref="l10n_ar_payroll.rules_EMBG-JUD" />
        </record>

        <!-- 99.000 - 99.999 - REGLAS NO MOSTRADAS DE TOTALES -->
        <record id="rules_TOTAL_GROSS" model="hr.salary.rule">
            <field name="name">TOTAL BRUTO - REMUNERATIVO</field>
            <field name="code">TOT-GROSS-REM</field>
            <field name="sequence">99999</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_TOTAL_GROSS" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = categories.GROSS
            </field>
        </record>
        <record id="rules_TOTAL_NOREM" model="hr.salary.rule">
            <field name="name">TOTAL NO REMUNERATIVO</field>
            <field name="code">TOT-NOREM</field>
            <field name="sequence">99999</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_TOTAL_NOREM" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = categories.NOREM
            </field>
        </record>
        <record id="rules_TOTAL_DESC" model="hr.salary.rule">
            <field name="name">TOTAL DESCUENTOS</field>
            <field name="code">TOT-DESC</field>
            <field name="sequence">99999</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_TOTAL_DESC" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = categories.RET + categories.DESC + categories.DED
            </field>
        </record>
        <record id="rules_TOTAL_NETO" model="hr.salary.rule">
            <field name="name">TOTAL NETO</field>
            <field name="code">TOT-NET</field>
            <field name="sequence">99999</field>
            <field name="category_id" ref="l10n_ar_payroll.categories_TOTAL_NET" />
            <field name="active">true</field>
            <field name="appears_on_payslip">true</field>
            <field name="note">Calculo de totales para recibo.</field>
            <!-- Condition Select -->
            <field name="condition_select">none</field>
            <!-- Amount Select -->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = categories.GROSS + categories.NOREM + categories.RET + categories.DESC + categories.DED
            </field>
        </record>

    </data>
</odoo>
